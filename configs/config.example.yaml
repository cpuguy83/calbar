# =============================================================================
# CalBar Configuration
# =============================================================================
# Location: ~/.config/calbar/config.yaml

# -----------------------------------------------------------------------------
# Sync Settings
# -----------------------------------------------------------------------------
sync:
  # How often to refresh calendar feeds
  interval: 5m

  # How far ahead to fetch events from calendar sources
  # Supports: days (14d), weeks (2w), or standard Go durations (336h)
  # Default: 14d
  time_range: 14d

# -----------------------------------------------------------------------------
# Calendar Sources
# -----------------------------------------------------------------------------
sources:
  # ICS URL feed (simplest method)
  - name: "Personal"
    type: ics
    url: "https://calendar.google.com/calendar/ical/YOUR_CALENDAR_ID/basic.ics"
  
  # ICS with basic auth
  # - name: "Private Feed"
  #   type: ics
  #   url: "https://example.com/private/calendar.ics"
  #   username: "myuser"
  #   password_cmd: "pass show calendar/example"
  
  # Individual fields can be fetched from a secret store using _cmd variants.
  # Each of url, username, and password has a corresponding _cmd field.
  # If both a field and its _cmd variant are set, the direct value takes precedence.
  # - name: "Google Calendar"
  #   type: ics
  #   url_cmd: "op read op://Vault/GoogleCal/url"
  #
  # - name: "CalDAV"
  #   type: caldav
  #   url: "https://caldav.example.com/calendars/user/default/"
  #   username_cmd: "op read op://Vault/CalDAV/username"
  #   password_cmd: "op read op://Vault/CalDAV/password"
  
  # CalDAV server
  # - name: "Personal"
  #   type: caldav
  #   url: "https://caldav.example.com/calendars/user/default/"
  #   username: "myuser"
  #   password_cmd: "pass show caldav/myserver"
  
  # Source with connection details from an external command (e.g. 1Password, pass, secret-tool).
  # The command must output YAML/JSON with connection fields: type, url, username, password, calendars.
  # This is useful when your config is public (e.g. NixOS) and you want to keep secrets out of it.
  # - name: "Personal"
  #   config_cmd: "op read op://Vault/GoogleCal/config"
  #
  # The 1Password entry would contain YAML like:
  #   type: ics
  #   url: "https://calendar.google.com/calendar/ical/SECRET_ID/basic.ics"
  #
  # Or for CalDAV:
  # - name: "Work"
  #   config_cmd: "pass show calbar/work"
  #   filters:
  #     mode: or
  #     rules:
  #       - field: title
  #         contains: "standup"
  
  # Microsoft 365 via Microsoft Identity Broker (Linux SSO)
  # Uses your existing browser session - no manual auth needed
  # - name: "Work (MS365)"
  #   type: ms365

# -----------------------------------------------------------------------------
# Event Filters
# -----------------------------------------------------------------------------
# Filter rules control which events are shown.
# - Include rules (default): Only matching events are shown
# - Exclude rules (exclude: true): Matching events are hidden
#
# Exclude rules are applied first, then include rules.
# If no include rules are defined, all non-excluded events are shown.
#
# Match types (use exactly one per rule):
#   contains: Substring match (default)
#   exact:    Exact string match
#   prefix:   Starts with
#   suffix:   Ends with
#   regex:    Regular expression

filters:
  # Logic mode for include rules:
  #   "or"  - Include event if it matches ANY rule (default)
  #   "and" - Include event only if it matches ALL rules
  mode: or
  
  rules:
    # Exclude rules - hide matching events
    # - field: title
    #   contains: "OOO"
    #   exclude: true
    #   case_insensitive: true
    
    # - field: title
    #   contains: "Canceled:"
    #   exclude: true
    
    # Include rules - only show matching events
    # Substring match (contains)
    - field: title
      contains: "standup"
      case_insensitive: true
    
    # Exact match
    # - field: title
    #   exact: "Weekly Team Standup"
    #   case_insensitive: true
    
    # Prefix match (starts with)
    # - field: title
    #   prefix: "[Important]"
    
    # Match by organizer email
    # - field: organizer
    #   contains: "manager@company.com"
    
    # Regex match
    # - field: title
    #   regex: "^(Team|Project)\\s+Meeting"
    #   case_insensitive: true

# -----------------------------------------------------------------------------
# Notification Settings
# -----------------------------------------------------------------------------
notifications:
  enabled: true
  
  # When to send notifications before event start
  before:
    - 15m
    - 5m

# -----------------------------------------------------------------------------
# UI Settings
# -----------------------------------------------------------------------------
ui:
  # How far ahead to show events in popup
  time_range: 24h
  
  # Theme: "system", "light", or "dark"
  theme: system
